<wxs module="filter" src="./setRecord.wxs"></wxs>
<view>
	<!--***** ç»Ÿè®¡é‡ -->
	<view wx:if="{{tempLength>0}}">
		<view class="moto-container">
			<view class="statistics_wrapper">
				<view class="statistics_view">å¸®å®è´ç»Ÿè®¡çš„æ•°æ®éƒ½åœ¨è¿™é‡Œå•¦ï¼</view>
			</view>
			<view class="statistics_wrapper">
				<view class="statistics_view">ğŸ»â™¥ï¸ğŸ‰</view>
			</view>
			<view class="picker_wrapper">
				<view class="picker_view">å…±æœ‰è®°å½•ï¼š{{obj.length}} æ¡</view>
			</view>
			<view class="picker_wrapper">
				<view class="picker_view">å¹³å‡ä¸¤æ¬¡æ‹œè®¿é—´éš”ï¼š{{avgInterval}} å¤©</view>
			</view>
			<view class="picker_wrapper">
				<view class="picker_view">å¹³å‡æ¯æ¬¡æ‹œè®¿ï¼š{{avgDuration}} å¤©</view>
			</view>
			<view class="picker_wrapper">
				<view class="picker_view">é¢„æµ‹ä¸‹æ¬¡æ‹œè®¿æ—¶é—´ï¼š{{preComeDate}}</view>
			</view>
		</view>
		<view class="moto-container">
			<view class="picker_wrapper">
				<view class="picker_view_bold">ç²¾ç®€åªè¯»æ¨¡å¼</view>
				<view class="right_switch_button">
					<switch checked="{{readOnly}}" bindchange="switchChange" />
				</view>
			</view>
		</view>
	</view>

	<!--***** æ— è®°å½•æ—¶çš„æç¤ºå›¾ -->
	<image wx:if="{{obj.length==0}}" class="header-bg" mode='aspectFit' src="../../images/bg1.jpg"></image>

	<!--***** æµ®åŠ¨çš„åŠ å·æŒ‰é’® -->
	<movable-area wx:if="{{!readOnly}}" class='movable-area'>
		<movable-view class="movable-view" direction="all">
			<image src='../../images/add_icon.png' mode='aspectFit' bindtap='onTapAdd'></image>
		</movable-view>
	</movable-area>

	<!--***** å†å²è®°å½•å¡ç‰‡ -->
	<view wx:if="{{!readOnly}}">
		<block wx:for="{{obj}}" wx:key="comeDate" wx:for-index='curIndex' wx:for-item='curItem'>
			<view class="backgroud-float">
				<!-- æœˆç»è®°å½•nï¼š     X -->
				<view class="top_wrapper">
					<text class="top_view">æœˆç»è®°å½•ï¼š{{curIndex + 1}}</text>
					<view class="delete_X" bindtap="onTapDelete" data-curIndex="{{curIndex}}">X</view>
				</view>
				<!-- å¥¹æ¥äº†å¥¹æ¥äº† -->
				<picker mode="date" bindchange="bindPickerRecentChange_Come" value="{{obj[curIndex].comeDate}}"
					start="{{startDate}}" end="{{endDate}}" data-curIndex="{{curIndex}}">
					<view class="picker_wrapper">
						<view class="picker_view">å¥¹æ¥äº†å¥¹æ¥äº†ï¼š{{obj[curIndex].comeDate}}</view>
						<view class="right_arrow">ã€‹</view>
					</view>
				</picker>
				<!-- å¥¹èµ°äº†å¥¹èµ°äº† -->
				<picker mode="date" bindchange="bindPickerRecentChange_Go" value="{{obj[curIndex].goDate}}"
					start="{{startDate}}" end="{{endDate}}" data-curIndex="{{curIndex}}">
					<view class="picker_wrapper">
						<view class="picker_view">å¥¹èµ°äº†å¥¹èµ°äº†ï¼š{{obj[curIndex].goDate}}</view>
						<view class="right_arrow">ã€‹</view>
					</view>
				</picker>
				<!-- æŒç»­æ—¶é—´ -->
				<view wx:if="{{obj[curIndex].duration >= 0}}" class="picker_wrapper">
					<view class="picker_view">å†ç»{{obj[curIndex].duration}}å¤©</view>
				</view>
			</view>
		</block>
	</view>

	<!--***** ç²¾ç®€è§†å›¾è¡¨æ ¼ -->
	<view wx:if="{{tempLength>0 && readOnly}}">
		<view class="moto-container">
			<scroll-view scroll-x="true">
				<view class="flex">
					<block wx:for="{{head}}" wx:key="key" wx:for-item="curHead" wx:for-index='curHeadIndex'>
						<view class="column" style="min-width:calc({{sizeList[curHeadIndex]+1}}em + 0rpx)">
							<view class="head_cell">{{curHead.name}}</view>
							<!-- ç¬¬ä¸€åˆ—æ˜¾ç¤ºåºå· -->
							<view wx:if="{{curHeadIndex==0}}">
								<view class="cell" wx:for="{{obj}}" wx:key="comeDate" wx:for-item="curLine" wx:for-index='curLineIndex'>
									{{curLineIndex+1}}
								</view>
							</view>
							<!-- åé¢åˆ—åˆ†åˆ«æ˜¾ç¤ºæ¥çš„æ—¥å­ã€èµ°çš„æ—¥å­å’ŒæŒç»­å¤©æ•° -->
							<view wx:if="{{curHeadIndex>0 && curHeadIndex<4}}">
								<view class="cell" wx:for="{{obj}}" wx:key="comeDate" wx:for-item="curLine">
									{{curLine[curHead.key]}}
								</view>
							</view>
							<!-- æœ€åä¸€åˆ—æ˜¾ç¤ºä¸¤æ¬¡æ¥å§¨å¦ˆçš„é—´éš” -->
							<view wx:if="{{curHeadIndex==4}}">
								<view class="cell" wx:for="{{obj}}" wx:key="comeDate" wx:for-item="curLine" wx:for-index="curLineIndex">
									{{filter.getInterval(obj[curLineIndex].comeDate, obj[curLineIndex-1].comeDate)}}
								</view>
							</view>
						</view>
					</block>
				</view>
			</scroll-view>
		</view>
	</view>

	<!-- ä¿å­˜æŒ‰é’® -->
	<view class="save-btn-wrapper">
		<button wx:if="{{obj.length>0}}" class="save-btn" hover-class="save-btn-hover" bindtap="onTapSave">
			ä¿å­˜åˆ°äº‘ç«¯
		</button>
	</view>
</view>